<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KP Research - æ™ºèƒ½çŸ¥è¯†ç ”ç©¶å¹³å°</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">
    <style>
        .progress-bar {
            transition: width 0.3s ease-in-out;
        }
        .markdown-content {
            line-height: 1.8;
        }
        .markdown-content h1 { @apply text-3xl font-bold mb-4 text-gray-800; }
        .markdown-content h2 { @apply text-2xl font-semibold mb-3 text-gray-700; }
        .markdown-content h3 { @apply text-xl font-medium mb-2 text-gray-600; }
        .markdown-content p { @apply mb-4 text-gray-700; }
        .markdown-content ul, .markdown-content ol { @apply mb-4 ml-6; }
        .markdown-content li { @apply mb-1; }
        .markdown-content blockquote { @apply border-l-4 border-blue-500 pl-4 italic bg-blue-50 py-2 mb-4; }
        .markdown-content code { @apply bg-gray-100 px-1 py-0.5 rounded text-sm font-mono; }
        .markdown-content pre { @apply bg-gray-900 text-white p-4 rounded-lg overflow-x-auto mb-4; }
        .node-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .log-entry {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .whale-animation {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        .title-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- å¤´éƒ¨ -->
        <header class="text-center mb-12">
            <div class="flex items-center justify-center mb-6">
                <!-- SVG é²¸é±¼å›¾æ ‡ -->
                <div class="whale-animation mr-4">
                    <svg width="64" height="48" viewBox="0 0 64 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M58 20C60.2091 20 62 21.7909 62 24V32C62 34.2091 60.2091 36 58 36H54C54 38.2091 52.2091 40 50 40H46C43.7909 40 42 38.2091 42 36V34C42 31.7909 40.2091 30 38 30H32C29.7909 30 28 28.2091 28 26V24C28 21.7909 26.2091 20 24 20H20C17.7909 20 16 18.2091 16 16V14C16 11.7909 14.2091 10 12 10H8C5.79086 10 4 8.20914 4 6V4C4 1.79086 5.79086 0 8 0H52C56.4183 0 60 3.58172 60 8V12C60 16.4183 58.2091 20 58 20Z" fill="url(#gradient1)"/>
                        <circle cx="48" cy="12" r="3" fill="#2563eb"/>
                        <path d="M2 16C2 16 8 12 12 16C16 20 20 16 20 16" stroke="#3b82f6" stroke-width="2" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h1 class="text-6xl font-bold title-gradient">KP Research</h1>
            </div>
            <p class="text-xl text-gray-600 font-medium">æ™ºèƒ½çŸ¥è¯†ç ”ç©¶ä¸æ·±åº¦åˆ†æå¹³å°</p>
        </header>

        <!-- ä¸»ç•Œé¢ -->
        <div class="max-w-6xl mx-auto">
            <!-- è¾“å…¥è¡¨å• -->
            <div id="inputSection" class="bg-white/80 backdrop-blur-sm rounded-xl shadow-lg p-8 mb-8 border border-white/20">
                <h2 class="text-3xl font-semibold mb-6 text-gray-700 flex items-center">
                    <span class="mr-3">ğŸ“„</span>
                    æ–‡æ¡£åˆ†æè®¾ç½®
                </h2>
                
                <form id="uploadForm" class="space-y-6">
                    <!-- æ–‡ä»¶ä¸Šä¼  -->
                    <div>
                        <label class="block text-lg font-medium text-gray-700 mb-3">ä¸Šä¼ æ–‡æ¡£</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition-all duration-300 hover:bg-blue-50/50">
                            <input type="file" id="fileInput" accept=".pdf,.epub,.md" class="hidden" title="é€‰æ‹©æ–‡æ¡£æ–‡ä»¶">
                            <div id="dropZone" class="cursor-pointer">
                                <svg class="mx-auto h-16 w-16 text-gray-400 mb-4" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <p class="mt-2 text-lg text-gray-600 font-medium">
                                    ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½åˆ°æ­¤å¤„
                                </p>
                                <p class="text-sm text-gray-500 mt-2">æ”¯æŒ PDF, EPUB, Markdown æ ¼å¼</p>
                            </div>
                            <div id="selectedFile" class="hidden mt-6 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                <p class="text-sm text-blue-700">
                                    <span class="font-medium">å·²é€‰æ‹©ï¼š</span>
                                    <span id="fileName"></span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- æ ¸å¿ƒé—®é¢˜ -->
                    <div>
                        <label for="coreQuestion" class="block text-lg font-medium text-gray-700 mb-3">æ ¸å¿ƒæ¢ç´¢é—®é¢˜</label>
                        <textarea 
                            id="coreQuestion" 
                            rows="4" 
                            class="w-full px-4 py-3 text-lg border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                            placeholder="è¯·è¾“å…¥æ‚¨å¸Œæœ›é€šè¿‡è¿™ä¸ªæ–‡æ¡£å›ç­”çš„æ ¸å¿ƒé—®é¢˜..."></textarea>
                    </div>

                    <!-- ç ”ç©¶è§’è‰² -->
                    <div>
                        <label for="researchRole" class="block text-lg font-medium text-gray-700 mb-3">ç ”ç©¶èº«ä»½</label>
                        <select id="researchRole" class="w-full px-4 py-3 text-lg border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                            <option value="èµ„æ·±è¡Œä¸šåˆ†æå¸ˆ">èµ„æ·±è¡Œä¸šåˆ†æå¸ˆ</option>
                            <option value="å­¦æœ¯ç ”ç©¶è€…">å­¦æœ¯ç ”ç©¶è€…</option>
                            <option value="æŠ€æœ¯ä¸“å®¶">æŠ€æœ¯ä¸“å®¶</option>
                            <option value="æˆ˜ç•¥é¡¾é—®">æˆ˜ç•¥é¡¾é—®</option>
                            <option value="æŠ•èµ„åˆ†æå¸ˆ">æŠ•èµ„åˆ†æå¸ˆ</option>
                            <option value="äº§å“ç»ç†">äº§å“ç»ç†</option>
                            <option value="è‡ªå®šä¹‰">è‡ªå®šä¹‰...</option>
                        </select>
                        <input 
                            type="text" 
                            id="customRole" 
                            class="hidden w-full mt-3 px-4 py-3 text-lg border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                            placeholder="è¯·è¾“å…¥è‡ªå®šä¹‰ç ”ç©¶èº«ä»½...">
                    </div>

                    <!-- å¼€å§‹æŒ‰é’® -->
                    <div class="pt-6">
                        <button 
                            type="submit" 
                            id="startBtn"
                            class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:ring-4 focus:ring-blue-200 transition-all duration-300 font-medium text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                            <span class="mr-2">ğŸš€</span>
                            å¼€å§‹æ·±åº¦åˆ†æ
                        </button>
                    </div>
                </form>
            </div>

            <!-- è¿›åº¦åŒºåŸŸ -->
            <div id="progressSection" class="hidden bg-white/80 backdrop-blur-sm rounded-xl shadow-lg p-8 mb-8 border border-white/20">
                <h2 class="text-3xl font-semibold mb-6 text-gray-700 flex items-center">
                    <span class="mr-3">ğŸ“Š</span>
                    åˆ†æè¿›åº¦
                </h2>
                
                <!-- è¿›åº¦æ¡ -->
                <div class="mb-8">
                    <div class="flex justify-between text-lg text-gray-600 mb-3">
                        <span id="progressText">å‡†å¤‡ä¸­...</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-indigo-500 h-4 rounded-full progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- èŠ‚ç‚¹çŠ¶æ€ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div id="node-rag" class="flex items-center p-4 bg-gray-50 rounded-lg shadow-sm">
                        <div class="w-4 h-4 bg-gray-300 rounded-full mr-4"></div>
                        <span class="text-lg">RAG æ•°æ®å‡†å¤‡</span>
                    </div>
                    <div id="node-reading" class="flex items-center p-4 bg-gray-50 rounded-lg shadow-sm">
                        <div class="w-4 h-4 bg-gray-300 rounded-full mr-4"></div>
                        <span class="text-lg">è¿­ä»£å¼é˜…è¯»</span>
                    </div>
                    <div id="node-report" class="flex items-center p-4 bg-gray-50 rounded-lg shadow-sm">
                        <div class="w-4 h-4 bg-gray-300 rounded-full mr-4"></div>
                        <span class="text-lg">æŠ¥å‘Šç”Ÿæˆ</span>
                    </div>
                </div>

                <!-- å®æ—¶æ—¥å¿— -->
                <div class="border rounded-lg bg-gray-900 text-green-400 p-6 h-80 overflow-y-auto font-mono text-sm shadow-inner">
                    <div id="logContainer">
                        <div class="text-gray-500">ç­‰å¾…å¼€å§‹...</div>
                    </div>
                </div>
            </div>

            <!-- ç»“æœåŒºåŸŸ -->
            <div id="resultsSection" class="hidden">
                <h2 class="text-3xl font-semibold mb-6 text-gray-700 flex items-center">
                    <span class="mr-3">ğŸ“‹</span>
                    åˆ†æç»“æœ
                </h2>
                
                <!-- ç»“æœæ ‡ç­¾é¡µ -->
                <div class="bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20">
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex">
                            <button class="tab-btn active py-6 px-8 text-lg font-medium border-b-2 border-blue-500 text-blue-600" data-tab="draft-report">
                                ğŸ“– æœ€ç»ˆæŠ¥å‘Š
                            </button>
                            <button class="tab-btn py-6 px-8 text-lg font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700" data-tab="chapter-summary">
                                ğŸ“ ç« èŠ‚æ‘˜è¦
                            </button>
                            <button class="tab-btn py-6 px-8 text-lg font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700" data-tab="thematic-analysis">
                                ğŸ¯ ä¸»é¢˜åˆ†æ
                            </button>
                            <button class="tab-btn py-6 px-8 text-lg font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700" data-tab="debate-questions">
                                ğŸ’¬ æ‰¹åˆ¤æ€§é—®ç­”
                            </button>
                        </nav>
                    </div>
                    
                    <div class="p-8">
                        <div id="draft-report" class="tab-content markdown-content"></div>
                        <div id="chapter-summary" class="tab-content markdown-content hidden"></div>
                        <div id="thematic-analysis" class="tab-content markdown-content hidden"></div>
                        <div id="debate-questions" class="tab-content markdown-content hidden"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½ JavaScript åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <!-- åº”ç”¨è„šæœ¬ -->
    <script src="app.js"></script>
</body>
</html>